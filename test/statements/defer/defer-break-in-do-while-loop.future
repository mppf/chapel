bug: defer not working in do-while loop containing break

issue #6535
